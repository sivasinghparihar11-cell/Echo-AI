<script>
    // AAPKA NAYA CLOUD RENDER LINK
    const SERVER_URL = 'https://echo-ai-iuu3.onrender.com/api/chat';

    async function sendMessage() {
        const input = document.getElementById('msgInput');
        const message = input.value.trim();
        if(!message) return;

        appendMessage('user', message);
        input.value = '';
        document.getElementById('status').innerText = 'Echo soch rahi hai...';

        try {
            const res = await fetch(SERVER_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ prompt: message })
            });
            const data = await res.json();
            document.getElementById('status').innerText = '';
            appendMessage('echo', data.response);
            
            // Voice support
            window.speechSynthesis.cancel();
            const s = new SpeechSynthesisUtterance(data.response);
            s.lang = 'hi-IN';
            window.speechSynthesis.speak(s);
        } catch (err) {
            document.getElementById('status').innerText = 'Server thoda slow hai, ruko...';
        }
    }
    // ... baaki add message wala function waisa hi rahega
</script>
